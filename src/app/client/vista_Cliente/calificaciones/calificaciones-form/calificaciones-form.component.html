<div
  *ngIf="!enviado; else gracias"
  class="max-w-md mx-auto p-6 bg-white dark:bg-gray-900 rounded-xl shadow-lg border border-green-300"
>
  <h2 class="text-lg font-semibold text-green-800 dark:text-green-200 mb-4">
    Califica nuestro servicio
  </h2>

  <label
    for="servicio"
    class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"
    >Servicio:</label
  >
  <select
    [(ngModel)]="servicio"
    id="servicio"
    required
    class="w-full mb-4 px-3 py-2 border border-green-300 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500"
  >
    <option value="" disabled selected>Selecciona un servicio</option>
    <option *ngFor="let s of serviciosDisponibles" [value]="s">{{ s }}</option>
  </select>

  <label
    for="puntuacion"
    class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"
    >Puntuación:</label
  >
  <select
    [(ngModel)]="puntuacion"
    id="puntuacion"
    class="w-full mb-4 px-3 py-2 border border-green-300 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500"
  >
    <option *ngFor="let n of [1, 2, 3, 4, 5]" [value]="n">{{ n }}</option>
  </select>

  <label
    for="comentario"
    class="block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1"
    >Comentario (opcional):</label
  >
  <textarea
    id="comentario"
    [(ngModel)]="comentario"
    class="w-full mb-4 px-3 py-2 border border-green-300 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-green-500"
    rows="3"
  ></textarea>

  <button
    (click)="enviar()"
    [disabled]="loading || !servicio"
    class="w-full bg-green-600 hover:bg-green-700 text-white dark:bg-green-800 dark:hover:bg-green-700 dark:text-gray-100 font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 disabled:opacity-50"
  >
    {{ loading ? "Enviando..." : "Enviar" }}
  </button>
</div>

<ng-template #gracias>
  <div
    class="max-w-md mx-auto p-6 bg-green-100 dark:bg-green-900 text-green-900 dark:text-green-100 rounded-xl shadow-md text-center"
  >
    <h3 class="text-lg font-semibold">¡Gracias por tu calificación!</h3>
  </div>
</ng-template>
